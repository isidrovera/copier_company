<odoo>
    <data>
        <!-- Acción del reporte -->
        <record id="action_report_report_cotizacion_alquiler" model="ir.actions.report">
            <field name="name">Propuesta Comercial de Alquiler</field>
            <field name="model">copier.company</field>
            <field name="report_type">qweb-pdf</field>
            <field name="report_name">copier_company.cotizacion_view</field>
            <field name="report_file">copier_company.cotizacion_view</field>
            <field name="print_report_name">'Propuesta Comercial - %s' % object.secuencia</field>
            <field name="binding_model_id" ref="model_copier_company"/>
            <field name="binding_type">report</field>
        </record>

        <!-- Plantilla QWeb para el reporte de cotización -->
        <template id="cotizacion_view">
            <t t-call="web.html_container">
                <t t-foreach="docs" t-as="doc">
                    <t t-call="web.external_layout">
                        <link rel="stylesheet" type="text/css" href="/static/src/css/report_styles.css"/>
                        <div class="page report-page">
                            <div class="report-header">
                                <div class="report-title">Propuesta Comercial Personalizada</div>
                                <div><t t-esc="doc.create_date.strftime('%d de %B de %Y')"/></div>
                                <div>Preparado para: <strong t-esc="doc.cliente_id.name"/></div>
                            </div>

                            <div class="info-card">
                                <p>Estimados señores,</p>
                                <p>Nos complace presentarle nuestra solución integral de impresión diseñada para optimizar sus procesos documentales.</p>
                            </div>

                            <div class="section-header">Equipo Multifuncional Premium</div>
                            <div class="info-card">
                                <strong t-esc="doc.name.name"/><br/>
                                <t t-if="doc.imagen_id">
                                    <div class="image-container">
                                        <img class="img-fluid" t-att-src="'data:image/png;base64,%s' % doc.imagen_id.decode('utf-8')"/>
                                    </div>
                                </t>
                            </div>

                            <div class="section-header">Especificaciones Técnicas</div>
                            <div class="info-card" t-raw="doc.especificaciones_id"/>

                            <div class="section-header">Propuesta Económica</div>
                            <table class="data-table">
                                <tr>
                                    <th colspan="2">Términos del Servicio</th>
                                </tr>
                                <tr>
                                    <td>Periodo de Servicio</td>
                                    <td>Del <t t-esc="doc.fecha_inicio_alquiler"/> al <t t-esc="doc.fecha_fin_alquiler"/></td>
                                </tr>
                                <tr>
                                    <td>Moneda</td>
                                    <td><t t-esc="doc.currency_id.name"/></td>
                                </tr>
                                
                                <!-- Servicios B/N -->
                                <tr>
                                    <th colspan="2">Servicios en Blanco y Negro</th>
                                </tr>
                                <tr>
                                    <td>Volumen Mensual</td>
                                    <td><t t-esc="'{:,}'.format(doc.volumen_mensual_bn)"/> impresiones</td>
                                </tr>
                                <tr>
                                    <td>Costo por Impresión</td>
                                    <td>S/. <t t-esc="'%.3f' % doc.costo_copia_bn"/> + IGV</td>
                                </tr>
                                <tr>
                                    <td>Renta Mensual B/N</td>
                                    <td>S/. <t t-esc="'%.2f' % doc.renta_mensual_bn"/></td>
                                </tr>

                                <!-- Servicios Color (condicional) -->
                                <t t-if="doc.tipo == 'color'">
                                    <tr>
                                        <th colspan="2">Servicios a Color</th>
                                    </tr>
                                    <tr>
                                        <td>Volumen Mensual</td>
                                        <td><t t-esc="'{:,}'.format(doc.volumen_mensual_color)"/> impresiones</td>
                                    </tr>
                                    <tr>
                                        <td>Costo por Impresión</td>
                                        <td>S/. <t t-esc="'%.3f' % doc.costo_copia_color"/> + IGV</td>
                                    </tr>
                                    <tr>
                                        <td>Renta Mensual Color</td>
                                        <td>S/. <t t-esc="'%.2f' % doc.renta_mensual_color"/></td>
                                    </tr>
                                </t>

                                <!-- Resumen -->
                                <tr>
                                    <th colspan="2">Resumen Financiero</th>
                                </tr>
                                <tr>
                                    <td>Descuento Aplicado</td>
                                    <td><t t-esc="doc.descuento"/>%</td>
                                </tr>
                                <tr>
                                    <td>IGV (<t t-esc="doc.igv"/>%)</td>
                                    <td>Incluido</td>
                                </tr>
                                <tr class="total-row">
                                    <td>Inversión Mensual Total</td>
                                    <td>S/. <t t-esc="'%.2f' % doc.total_facturar_mensual"/></td>
                                </tr>
                            </table>

                            <div class="section-header">Beneficios Premium Incluidos</div>
                            <ul class="feature-list">
                                <li>Servicio técnico preventivo y correctivo</li>
                                <li>Instalación y configuración profesional</li>
                                <li>Capacitación para su personal</li>
                                <li>Insumos y repuestos originales</li>
                                <li>Servicio de digitalización incluido</li>
                                <li>Soporte técnico prioritario</li>
                                <li>Garantía de reemplazo</li>
                            </ul>

                            <div class="section-header">Información de Pago</div>
                            <div class="info-card">
                                <strong>Cuentas bancarias:</strong>
                                <ul class="feature-list">
                                    <li>BCP: 191-2334609-0-07</li>
                                    <li>CCI: 002-19100233460900751</li>
                                    <li>Detracciones BN: 00802007582</li>
                                </ul>
                            </div>

                            <div class="section-header">Términos y Condiciones</div>
                            <ul class="feature-list">
                                <li>Contrato mínimo: <t t-esc="doc.duracion_alquiler_id.name"/></li>
                                <li>Mantenimiento preventivo bimestral</li>
                                <li>Tiempo de respuesta garantizado</li>
                                <li>Papel no incluido</li>
                                <li>Entrega: 5 días hábiles</li>
                            </ul>

                            <div class="highlight-box">
                                <p>Quedamos a su disposición para cualquier consulta adicional.</p>
                                <p>Atentamente,</p>
                                <p><strong>Equipo de Soluciones de Impresión</strong></p>
                            </div>
                        </div>
                    </t>
                </t>
            </t>
        </template>
    </data>
</odoo>