<?xml version="1.0" encoding="UTF-8"?>
<odoo>
    <data>
         <record id="action_report_report_cotizacion_alquiler" model="ir.actions.report">
            <field name="name">Propuesta Comercial de Alquiler</field>
            <field name="model">copier.company</field>
            <field name="report_type">qweb-pdf</field>
            <field name="report_name">copier_company.cotizacion_view</field>
            <field name="report_file">copier_company.cotizacion_view</field>
            <field name="print_report_name">'Propuesta Comercial - %s' % object.secuencia</field>
            <field name="binding_model_id" ref="model_copier_company"/>
            <field name="binding_type">report</field>
        </record>

        <template id="cotizacion_view">
            <t t-call="web.html_container">
                <t t-foreach="docs" t-as="doc">
                    <t t-call="web.basic_layout">
                        <link href="https://unpkg.com/modern-normalize@2.0.0/modern-normalize.css" rel="stylesheet"/>
                        <link href="https://unpkg.com/@tailwindcss/typography@0.5.10/dist/typography.min.css" rel="stylesheet"/>
                        <style>
                            @import url('https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@300;400;500;600;700&amp;display=swap');
                            
                            :root {
                                --primary: #0f172a;
                                --secondary: #334155;
                                --accent: #3b82f6;
                                --neutral: #e2e8f0;
                                --success: #22c55e;
                            }

                            .quote-container {
                                font-family: 'Plus Jakarta Sans', sans-serif;
                                color: var(--primary);
                                line-height: 1.6;
                                padding: 2rem;
                                max-width: 1200px;
                                margin: 0 auto;
                            }

                            .header-gradient {
                                background: linear-gradient(135deg, var(--primary) 0%, var(--accent) 100%);
                                color: white;
                                padding: 2rem;
                                border-radius: 0.5rem;
                                margin-bottom: 2rem;
                                box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
                            }

                            .section-card {
                                background: white;
                                border-radius: 0.5rem;
                                box-shadow: 0 1px 3px rgba(0,0,0,0.1);
                                padding: 1.5rem;
                                margin-bottom: 1.5rem;
                                border: 1px solid var(--neutral);
                            }

                            .data-table {
                                width: 100%;
                                border-collapse: separate;
                                border-spacing: 0;
                                margin: 1rem 0;
                                border-radius: 0.5rem;
                                overflow: hidden;
                            }

                            .data-table th {
                                background: var(--primary);
                                color: white;
                                padding: 1rem;
                                font-weight: 600;
                                text-align: left;
                            }

                            .data-table td {
                                padding: 1rem;
                                border-bottom: 1px solid var(--neutral);
                            }

                            .data-table tr:last-child td {
                                border-bottom: none;
                            }

                            .data-table tr:nth-child(even) td {
                                background: rgba(0,0,0,0.02);
                            }

                            .total-row {
                                background: var(--accent) !important;
                                color: white;
                                font-weight: 600;
                            }

                            .flex-list {
                                display: grid;
                                grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
                                gap: 1rem;
                                list-style: none;
                                padding: 0;
                            }

                            .flex-list li {
                                padding: 0.75rem;
                                background: #f8fafc;
                                border-radius: 0.25rem;
                                border: 1px solid var(--neutral);
                                display: flex;
                                align-items: center;
                                gap: 0.5rem;
                            }

                            .flex-list li::before {
                                content: '✓';
                                color: var(--success);
                                font-weight: bold;
                            }

                            h2 {
                                color: var(--primary);
                                font-size: 1.5rem;
                                font-weight: 600;
                                margin-bottom: 1rem;
                                padding-bottom: 0.5rem;
                                border-bottom: 2px solid var(--accent);
                            }

                            img {
                                max-width: 100%;
                                height: auto;
                                border-radius: 0.5rem;
                                box-shadow: 0 4px 6px -1px rgba(0,0,0,0.1);
                            }

                            .prose {
                                color: var(--secondary);
                            }
                        </style>
                        <div class="quote-container">
                            <div class="header-gradient">
                                <h1 class="text-3xl font-bold mb-2">Propuesta Comercial</h1>
                                <div class="text-lg opacity-90">
                                    <div>Fecha: <t t-esc="doc.create_date.strftime('%d/%m/%Y')"/></div>
                                    <div>Cliente: <span t-field="doc.cliente_id.name"/></div>
                                </div>
                            </div>

                            <div class="section-card">
                                <h2 class="text-2xl font-semibold mb-4">Equipo Propuesto</h2>
                                <div class="font-medium text-lg mb-3" t-field="doc.name.name"/>
                                <t t-if="doc.imagen_id">
                                    <img t-att-src="'data:image/png;base64,%s' % doc.imagen_id.decode('utf-8')" 
                                         class="max-w-full h-auto rounded-lg shadow-md mb-4"/>
                                </t>
                                <div class="prose max-w-none" t-raw="doc.especificaciones_id"/>
                            </div>

                            <div class="section-card">
                                <h2 class="text-2xl font-semibold mb-4">Propuesta Económica</h2>
                                <table class="data-table">
                                    <tr>
                                        <th colspan="2">Detalles del Servicio</th>
                                    </tr>
                                    <tr>
                                        <td>Periodo de Servicio</td>
                                        <td>Del <span t-field="doc.fecha_inicio_alquiler"/> al <span t-field="doc.fecha_fin_alquiler"/></td>
                                    </tr>
                                    <tr>
                                        <td>Moneda</td>
                                        <td><span t-field="doc.currency_id.name"/></td>
                                    </tr>
                                    <tr>
                                        <th colspan="2">Servicio Blanco y Negro</th>
                                    </tr>
                                    <tr>
                                        <td>Volumen Mensual</td>
                                        <td><t t-esc="'{:,}'.format(doc.volumen_mensual_bn)"/> copias</td>
                                    </tr>
                                    <tr>
                                        <td>Costo por Copia</td>
                                        <td>S/. <t t-esc="'%.3f' % doc.costo_copia_bn"/> + IGV</td>
                                    </tr>
                                    <t t-if="doc.tipo == 'color'">
                                        <tr>
                                            <th colspan="2">Servicio Color</th>
                                        </tr>
                                        <tr>
                                            <td>Volumen Mensual</td>
                                            <td><t t-esc="'{:,}'.format(doc.volumen_mensual_color)"/> copias</td>
                                        </tr>
                                        <tr>
                                            <td>Costo por Copia</td>
                                            <td>S/. <t t-esc="'%.3f' % doc.costo_copia_color"/> + IGV</td>
                                        </tr>
                                    </t>
                                    <tr>
                                        <td>Descuento</td>
                                        <td><t t-esc="doc.descuento"/>%</td>
                                    </tr>
                                    <tr class="total-row">
                                        <td>Total Mensual</td>
                                        <td>S/. <t t-esc="'%.2f' % doc.total_facturar_mensual"/></td>
                                    </tr>
                                </table>
                            </div>

                            <div class="section-card">
                                <h2 class="text-2xl font-semibold mb-4">Beneficios Incluidos</h2>
                                <ul class="flex-list">
                                    <li>✓ Servicio técnico preventivo y correctivo</li>
                                    <li>✓ Instalación y configuración profesional</li>
                                    <li>✓ Capacitación para usuarios</li>
                                    <li>✓ Insumos originales incluidos</li>
                                    <li>✓ Soporte técnico prioritario</li>
                                    <li>✓ Garantía total del equipo</li>
                                </ul>
                            </div>

                            <div class="section-card">
                                <h2 class="text-2xl font-semibold mb-4">Información Bancaria</h2>
                                <ul class="flex-list">
                                    <li>BCP: 191-2334609-0-07</li>
                                    <li>CCI: 002-19100233460900751</li>
                                    <li>Detracciones BN: 00802007582</li>
                                </ul>
                            </div>

                            <div class="section-card">
                                <h2 class="text-2xl font-semibold mb-4">Condiciones del Servicio</h2>
                                <ul class="flex-list">
                                    <li>• Contrato mínimo: <span t-field="doc.duracion_alquiler_id.name"/></li>
                                    <li>• Mantenimiento preventivo bimestral</li>
                                    <li>• Tiempo de respuesta garantizado</li>
                                    <li>• Papel no incluido</li>
                                    <li>• Entrega en 5 días hábiles</li>
                                </ul>
                            </div>

                            <div class="section-card text-center">
                                <p class="text-lg">Gracias por su preferencia</p>
                                <p class="font-semibold text-lg mt-2">Equipo Comercial</p>
                            </div>
                        </div>

                        <div class="footer text-center text-sm text-gray-600">
                            <div>Página <span class="page"/> de <span class="topage"/></div>
                        </div>
                    </t>
                </t>
            </t>
        </template>
    </data>
</odoo>