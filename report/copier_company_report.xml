<odoo>
    <data>
        <!-- Acción del reporte -->
        <record id="action_report_report_cotizacion_alquiler" model="ir.actions.report">
            <field name="name">Propuesta Comercial de Alquiler</field>
            <field name="model">copier.company</field>
            <field name="report_type">qweb-pdf</field>
            <field name="report_name">copier_company.cotizacion_view</field>
            <field name="report_file">copier_company.cotizacion_view</field>
            <field name="print_report_name">'Propuesta Comercial - %s' % object.secuencia</field>
            <field name="binding_model_id" ref="model_copier_company"/>
            <field name="binding_type">report</field>
        </record>

        <!-- Plantilla QWeb para el reporte de cotización -->
        <template id="cotizacion_view">
            <t t-call="web.html_container">
                <t t-foreach="docs" t-as="doc">
                    <t t-call="web.external_layout">
                        <style>
                            :root {
                                --primary: #1e293b;
                                --secondary: #4b5563;
                                --accent: #3b82f6;
                                --background: #ffffff;
                                --text: #111827;
                                --border: #d1d5db;
                                --table-bg: #f9fafb;
                                --table-alt: #f3f4f6;
                            }

                            .report-page {
                                background-color: var(--background);
                                color: var(--text);
                                line-height: 1.6;
                                font-size: 1rem;
                                padding: 1.5rem;
                            }

                            .data-table {
                                width: 100%;
                                border-collapse: collapse;
                                background: var(--table-bg);
                                box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
                                border-radius: 10px;
                                overflow: hidden;
                                margin: 2rem 0;
                            }

                            .data-table th {
                                background: var(--primary);
                                color: white;
                                padding: 1rem;
                                font-weight: bold;
                                text-transform: uppercase;
                                font-size: 0.9rem;
                                border-bottom: 2px solid var(--accent);
                                text-align: left;
                            }

                            .data-table td {
                                padding: 1rem;
                                border-bottom: 1px solid var(--border);
                                background: var(--table-bg);
                            }

                            .data-table tr:nth-child(even) td {
                                background: var(--table-alt);
                            }

                            .data-table tr:last-child td {
                                border-bottom: none;
                            }

                            .section-header {
                                color: var(--primary);
                                font-size: 1.2rem;
                                font-weight: bold;
                                margin: 1.5rem 0 0.5rem;
                                border-bottom: 2px solid var(--accent);
                                padding-bottom: 0.5rem;
                            }

                            .info-card {
                                background: var(--table-bg);
                                padding: 1.5rem;
                                border-radius: 8px;
                                margin: 1rem 0;
                                box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
                            }

                            .feature-list {
                                list-style: disc;
                                padding-left: 2rem;
                                color: var(--text);
                            }

                            .highlight-box {
                                background: var(--table-alt);
                                padding: 1rem;
                                border-radius: 8px;
                                font-style: italic;
                                color: var(--secondary);
                                margin-top: 2rem;
                            }
                        </style>

                        <div class="page report-page">
                            <div class="report-header">
                                <div class="report-title">Propuesta Comercial Personalizada</div>
                                <div><t t-esc="doc.create_date.strftime('%d de %B de %Y')"/></div>
                                <div>Preparado para: <strong t-esc="doc.cliente_id.name"/></div>
                            </div>

                            <div class="info-card">
                                <p>Estimados señores,</p>
                                <p>Nos complace presentarle nuestra solución integral de impresión diseñada para optimizar sus procesos documentales.</p>
                            </div>

                            <div class="section-header">Equipo Multifuncional Premium</div>
                            <div class="info-card">
                                <strong t-esc="doc.name.name"/><br/>
                                <t t-if="doc.imagen_id">
                                    <div class="image-container">
                                        <img class="img-fluid" t-att-src="'data:image/png;base64,%s' % doc.imagen_id.decode('utf-8')"/>
                                    </div>
                                </t>
                            </div>

                            <div class="section-header">Especificaciones Técnicas</div>
                            <div class="info-card" t-raw="doc.especificaciones_id"/>

                            <div class="section-header">Propuesta Económica</div>
                            <table class="data-table">
                                <tr>
                                    <th colspan="2">Términos del Servicio</th>
                                </tr>
                                <tr>
                                    <td>Periodo de Servicio</td>
                                    <td>Del <t t-esc="doc.fecha_inicio_alquiler"/> al <t t-esc="doc.fecha_fin_alquiler"/></td>
                                </tr>
                                <tr>
                                    <td>Moneda</td>
                                    <td><t t-esc="doc.currency_id.name"/></td>
                                </tr>

                                <!-- Servicios B/N -->
                                <tr>
                                    <th colspan="2">Servicios en Blanco y Negro</th>
                                </tr>
                                <tr>
                                    <td>Volumen Mensual</td>
                                    <td><t t-esc="'{:,}'.format(doc.volumen_mensual_bn)"/> impresiones</td>
                                </tr>
                                <tr>
                                    <td>Costo por Impresión</td>
                                    <td>S/. <t t-esc="'%.3f' % doc.costo_copia_bn"/> + IGV</td>
                                </tr>
                                <tr>
                                    <td>Renta Mensual B/N</td>
                                    <td>S/. <t t-esc="'%.2f' % doc.renta_mensual_bn"/></td>
                                </tr>

                                <!-- Servicios Color (condicional) -->
                                <t t-if="doc.tipo == 'color'">
                                    <tr>
                                        <th colspan="2">Servicios a Color</th>
                                    </tr>
                                    <tr>
                                        <td>Volumen Mensual</td>
                                        <td><t t-esc="'{:,}'.format(doc.volumen_mensual_color)"/> impresiones</td>
                                    </tr>
                                    <tr>
                                        <td>Costo por Impresión</td>
                                        <td>S/. <t t-esc="'%.3f' % doc.costo_copia_color"/> + IGV</td>
                                    </tr>
                                    <tr>
                                        <td>Renta Mensual Color</td>
                                        <td>S/. <t t-esc="'%.2f' % doc.renta_mensual_color"/></td>
                                    </tr>
                                </t>

                                <!-- Resumen -->
                                <tr>
                                    <th colspan="2">Resumen Financiero</th>
                                </tr>
                                <tr>
                                    <td>Descuento Aplicado</td>
                                    <td><t t-esc="doc.descuento"/>%</td>
                                </tr>
                                <tr>
                                    <td>IGV (<t t-esc="doc.igv"/>%)</td>
                                    <td>Incluido</td>
                                </tr>
                                <tr class="total-row">
                                    <td>Inversión Mensual Total</td>
                                    <td>S/. <t t-esc="'%.2f' % doc.total_facturar_mensual"/></td>
                                </tr>
                            </table>

                            <div class="section-header">Beneficios Premium Incluidos</div>
                            <ul class="feature-list">
                                <li>Servicio técnico preventivo y correctivo</li>
                                <li>Instalación y configuración profesional</li>
                                <li>Capacitación para su personal</li>
                                <li>Insumos y repuestos originales</li>
                                <li>Servicio de digitalización incluido</li>
                                <li>Soporte técnico prioritario</li>
                                <li>Garantía de reemplazo</li>
                            </ul>

                            <div class="section-header">Información de Pago</div>
                            <div class="info-card">
                                <strong>Cuentas bancarias:</strong>
                                <ul class="feature-list">
                                    <li>BCP: 191-2334609-0-07</li>
                                    <li>CCI: 002-19100233460900751</li>
                                    <li>Detracciones BN: 00802007582</li>
                                </ul>
                            </div>

                            <div class="section-header">Términos y Condiciones</div>
                            <ul class="feature-list">
                                <li>Contrato mínimo: <t t-esc="doc.duracion_alquiler_id.name"/></li>
                                <li>Mantenimiento preventivo bimestral</li>
                                <li>Tiempo de respuesta garantizado</li>
                                <li>Papel no incluido</li>
                                <li>Entrega: 5 días hábiles</li>
                            </ul>

                            <div class="highlight-box">
                                <p>Quedamos a su disposición para cualquier consulta adicional.</p>
                                <p>Atentamente,</p>
                                <p><strong>Equipo de Soluciones de Impresión</strong></p>
                            </div>
                        </div>
                    </t>
                </t>
            </t>
        </template>
    </data>
</odoo>
