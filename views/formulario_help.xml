<odoo>
    <template id="ticket_form_inherit" inherit_id="website_helpdesk.team_form_1" name="Helpdesk Ticket Form Inherit">
        <xpath expr="//div[@id='helpdesk_section']" position="inside">
            <!-- Agregar campos después del formulario de tickets -->
            <div class="mb-0 py-2 s_website_form_field col-12" data-type="many2one" data-name="producto_id">
                <!-- Asegúrate de que el 'for' en el label y el 'id' en el select sean únicos -->
                <label class="col-form-label col-sm-auto s_website_form_label" style="width: 200px" for="select_serie">
                    <span class="s_website_form_label_content">Serie</span>
                </label>
                <div class="col-sm">
                    <select class="form-control s_website_form_input" name="producto_id" id="select_serie">
                        <!-- Las opciones serán llenadas dinámicamente por JavaScript -->
                    </select>
                </div>
            </div>
            <!-- Suponiendo que 'serie_id' es un campo relacionado y se llena automáticamente basado en 'producto_id' -->
            <div class="mb-0 py-2 s_website_form_field col-12" data-type="char" data-name="serie_id">
                <label class="col-form-label col-sm-auto s_website_form_label" style="width: 200px" for="input_modelo">
                    <span class="s_website_form_label_content">Modelo</span>
                </label>
                <div class="col-sm">
                    <input type="text" class="form-control s_website_form_input" name="serie_id" id="input_modelo" readonly="1"/>
                </div>
            </div>
        </xpath>
        <!-- Inyectar JavaScript para poblar el campo Many2one -->
        <xpath expr="//div[@id='helpdesk_section']" position="after">
            <script type="text/javascript">
                $(document).ready(function(){
                    $.ajax({
                        url: '/helpdesk/get_series',
                        method: 'POST',
                        dataType: 'json',
                        success: function(data) {
                            var select = $('#select_serie');
                            select.empty(); // Limpiar las opciones anteriores
                            $.each(data, function() {
                                select.append($('<option/>', {
                                    value: this.id,
                                    text: this.name
                                }));
                            });
                        },
                        error: function() {
                            alert("Error al cargar las series");
                        }
                    });
                });
            </script>
        </xpath>
    </template>
</odoo>
