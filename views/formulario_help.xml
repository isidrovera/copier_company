<odoo>
    <template id="ticket_form_inherit" inherit_id="website_helpdesk.ticket_submit_form" name="Helpdesk Ticket Form Inherit">
        <xpath expr="//div[div[label[span[.='Subject']]]]" position="after">
            <div class="mb-0 py-2 s_website_form_field col-12" data-type="many2one" data-name="producto_id">
                <div class="row s_col_no_resize s_col_no_bgcolor">
                    <label class="col-form-label col-sm-auto s_website_form_label" style="width: 200px" for="producto_id">
                        <span class="s_website_form_label_content">Serie</span>
                    </label>
                    <div class="col-sm">
                        <select class="form-control s_website_form_input" name="producto_id" id="producto_id">
                            <!-- Las opciones serán llenadas dinámicamente -->
                        </select>
                    </div>
                </div>
            </div>
            <div class="mb-0 py-2 s_website_form_field col-12" data-type="char" data-name="serie_id">
                <div class="row s_col_no_resize s_col_no_bgcolor">
                    <label class="col-form-label col-sm-auto s_website_form_label" style="width: 200px" for="serie_id">
                        <span class="s_website_form_label_content">Modelo</span>
                    </label>
                    <div class="col-sm">
                        <input type="text" class="form-control s_website_form_input" name="serie_id" id="serie_id" readonly="1"/>
                    </div>
                </div>
            </div>
        </xpath>
        <!-- Inyectar JavaScript para poblar el campo Many2one -->
        <xpath expr="//form" position="after">
            <script type="text/javascript">
                $(document).ready(function(){
                    $.ajax({
                        url: '/helpdesk/get_series',
                        method: 'POST',
                        dataType: 'json',
                        success: function(data) {
                            var select = $('#producto_id');
                            select.empty(); // Limpiar las opciones anteriores
                            $.each(data, function() {
                                select.append($('<option/>', {
                                    value: this.id,
                                    text: this.name
                                }));
                            });
                        },
                        error: function() {
                            alert("Error al cargar las series");
                        }
                    });
                });
            </script>
        </xpath>
    </template>
</odoo>
