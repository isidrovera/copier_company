<odoo>
    <template id="ticket_form_inherit" inherit_id="website_helpdesk.team_form_1" name="Helpdesk Ticket Form Inherit">
        <xpath expr="//div[.//input[@id='helpdesk3']]" position="after">
            <div class="mb-0 py-2 s_website_form_field col-12" data-type="many2one" data-name="Field">
                <div class="row s_col_no_resize s_col_no_bgcolor">
                    <label class="col-form-label col-sm-auto s_website_form_label" style="width: 200px" for="select_serie">
                        <span class="s_website_form_label_content">Serie</span>
                        <!-- No es necesario un asterisco si no es un campo requerido -->
                    </label>
                    <div class="col-sm">
                        <select class="form-control s_website_form_input" name="producto_id" id="select_serie">
                            <!-- Las opciones serán llenadas dinámicamente por JavaScript -->
                        </select>
                    </div>
                </div>
            </div>
            <!-- El campo 'serie_id' podría ser un campo calculado o relacionado que se actualice automáticamente cuando 'producto_id' cambie -->
            <div class="mb-0 py-2 s_website_form_field col-12" data-type="char" data-name="Field">
                <div class="row s_col_no_resize s_col_no_bgcolor">
                    <label class="col-form-label col-sm-auto s_website_form_label" style="width: 200px" for="input_modelo">
                        <span class="s_website_form_label_content">Modelo</span>
                        <!-- No es necesario un asterisco si no es un campo requerido -->
                    </label>
                    <div class="col-sm">
                        <input type="text" class="form-control s_website_form_input" name="serie_id" id="input_modelo" readonly="1"/>
                    </div>
                </div>
            </div>
        </xpath>
        <!-- Inyectar JavaScript para poblar el campo Many2one -->
        <xpath expr="//form" position="after">
            <script type="text/javascript">
                $(document).ready(function(){
                    $.ajax({
                        url: '/helpdesk/get_series',
                        method: 'POST',
                        dataType: 'json',
                        success: function(data) {
                            var select = $('#select_serie');
                            select.empty(); // Limpiar las opciones anteriores
                            $.each(data, function() {
                                select.append($('<option/>', {
                                    value: this.id,
                                    text: this.name
                                }));
                            });
                            // Agregar un valor predeterminado o un prompt si es necesario
                            select.prepend($('<option/>', {
                                value: '',
                                text: 'Seleccione una serie...'
                            })).val('');
                        },
                        error: function() {
                            alert("Error al cargar las series");
                            // Considera manejar el error de manera más apropiada que solo una alerta
                        }
                    });
                });
            </script>
        </xpath>
    </template>
</odoo>
