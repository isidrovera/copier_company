<odoo>
    <template id="portal_alquiler_form" name="Portal Alquiler Form">
        <t t-call="website.layout">
            <div class="container mt-5 pt-5">
                <h1 class="text-center mb-4">Formulario de Cotización de Alquiler</h1>
                <form action="/portal/alquiler/submit" method="post" class="needs-validation" novalidate="novalidate">

                    <input type="hidden" name="csrf_token" t-att-value="request.csrf_token()"/>
                    
                    <!-- Tipo de identificación -->
                    <div class="row mb-3">
                        <label for="identificacion_type" class="col-sm-3 col-form-label">Tipo de identificación</label>
                        <div class="col-sm-9">
                            <select id="identificacion_type" name="identificacion_type" class="form-control" required="required">
                                <option value="">Seleccione el tipo de identificación...</option>
                                <option value="ruc">RUC</option>
                                <option value="dni">DNI</option>
                            </select>
                        </div>
                    </div>
                    
                    <!-- Número de Identificación -->
                    <div class="row mb-3">
                        <label for="identificacion_number" class="col-sm-3 col-form-label">Número de Identificación</label>
                        <div class="col-sm-9">
                            <input type="text" id="identificacion_number" name="identificacion_number" class="form-control" placeholder="Ingrese el número de identificación" required="required"/>
                        </div>
                    </div>

                    <!-- Nombre de empresa -->
                    <div class="row mb-3">
                        <label for="empresa" class="col-sm-3 col-form-label">Nombre de empresa</label>
                        <div class="col-sm-9">
                            <input type="text" id="empresa" name="empresa" class="form-control" placeholder="Ingrese el nombre de la empresa" required="required"/>
                        </div>
                    </div>
                    
                    <!-- Contacto -->
                    <div class="row mb-3">
                        <label for="contacto" class="col-sm-3 col-form-label">Contacto</label>
                        <div class="col-sm-9">
                            <input type="text" id="contacto" name="contacto" class="form-control" placeholder="Nombre de la persona de contacto" required="required"/>
                        </div>
                    </div>
                    
                    <!-- Celular -->
                    <div class="row mb-3">
                        <label for="celular" class="col-sm-3 col-form-label">Celular</label>
                        <div class="col-sm-9">
                            <input type="text" name="celular" class="form-control" placeholder="Número de celular" required="required"/>
                        </div>
                    </div>
                    
                    <!-- Correo -->
                    <div class="row mb-3">
                        <label for="correo" class="col-sm-3 col-form-label">Correo</label>
                        <div class="col-sm-9">
                            <input type="email" name="correo" class="form-control" placeholder="Email de contacto" required="required"/>
                        </div>
                    </div>
                    
                    <!-- Marca -->
                    <div class="row mb-3">
                        <label for="marca_id" class="col-sm-3 col-form-label">Marca</label>
                        <div class="col-sm-9">
                            <select name="marca_id" class="form-control" required="required">
                                <option value="">Seleccione una marca...</option>
                                <t t-foreach="marcas" t-as="marca">
                                    <option t-att-value="marca.id" t-esc="marca.name"/>
                                </t>
                            </select>
                        </div>
                    </div>
                    
                    <!-- Tipo de impresora -->
                    <div class="row mb-3">
                        <label for="tipo" class="col-sm-3 col-form-label">Tipo de impresora</label>
                        <div class="col-sm-9">
                            <select name="tipo" class="form-control" required="required">
                                <option value="monocroma">Blanco y negro</option>
                                <option value="color">Color</option>
                            </select>
                        </div>
                    </div>
                    
                    <!-- Formato de papel -->
                    <div class="row mb-3">
                        <label for="formato" class="col-sm-3 col-form-label">Formato de papel</label>
                        <div class="col-sm-9">
                            <select name="formato" class="form-control" required="required">
                                <option value="">Seleccione un formato...</option>
                                <option value="a4">A4</option>
                                <option value="a3">A3</option>
                            </select>
                        </div>
                    </div>
                    
                    <!-- Cantidad mensual -->
                    <div class="row mb-3">
                        <label for="cantidad" class="col-sm-3 col-form-label">Cantidad mensual</label>
                        <div class="col-sm-9">
                            <input type="text" name="cantidad" class="form-control" placeholder="Cantidad mensual de impresiones" required="required"/>
                        </div>
                    </div>
                    
                    <!-- Detalles o comentarios -->
                    <div class="row mb-3">
                        <label for="detalles" class="col-sm-3 col-form-label">Agregue comentarios</label>
                        <div class="col-sm-9">
                            <textarea name="detalles" class="form-control" rows="3" placeholder="Cualquier detalle adicional" required="required"></textarea>
                        </div>
                    </div>
                    
                    <!-- Botón de envío -->
                    <div class="row">
                        <div class="col-sm-9 offset-sm-3">
                            <button type="submit" class="btn btn-primary">Enviar</button>
                        </div>
                    </div>
                </form>
            </div>
            <script>
                document.addEventListener("DOMContentLoaded", function() {
                    var identificacionType = document.getElementById("identificacion_type");
                    var identificacionNumber = document.getElementById("identificacion_number");

                    identificacionNumber.addEventListener("change", function() {
                        var type = identificacionType.value;
                        var number = identificacionNumber.value;
                        
                        if (type AND number) {
                            if (type === "ruc") {
                                fetch(`https://api.sunat.cloud/ruc/${number}`)
                                    .then(response =&lt; response.json())
                                    .then(data =&lt; {
                                        if (data.success) {
                                            document.getElementById("empresa").value = data.razon_social;
                                            document.getElementById("contacto").value = data.representante_legal ? data.representante_legal.nombre : '';
                                        } else {
                                            alert("No se encontraron datos para el RUC ingresado.");
                                        }
                                    })
                                    .catch(error =&lt; {
                                        console.error("Error fetching data from SUNAT:", error);
                                    });
                            } else if (type === "dni") {
                                fetch(`https://api.apis.net.pe/v1/dni?numero=${number}`)
                                    .then(response =&lt; response.json())
                                    .then(data =&lt; {
                                        if (data.success) {
                                            document.getElementById("empresa").value = `${data.nombres} ${data.apellidoPaterno} ${data.apellidoMaterno}`;
                                            document.getElementById("contacto").value = `${data.nombres} ${data.apellidoPaterno} ${data.apellidoMaterno}`;
                                        } else {
                                            alert("No se encontraron datos para el DNI ingresado.");
                                        }
                                    })
                                    .catch(error =&lt; {
                                        console.error("Error fetching data from RENIEC:", error);
                                    });
                            }
                        }
                    });
                });
            </script>
        </t>
    </template>
</odoo>
