<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <!-- ========================================= -->
    <!-- WIZARD: ENVIAR WHATSAPP -->
    <!-- ========================================= -->
    <record id="view_whatsapp_send_wizard_form" model="ir.ui.view">
        <field name="name">whatsapp.send.wizard.form</field>
        <field name="model">whatsapp.send.wizard</field>
        <field name="arch" type="xml">
            <form string="Enviar WhatsApp">
                <group>
                    <field name="model_name" invisible="1"/>
                    <field name="res_id" invisible="1"/>
                    
                    <field name="template_id" 
                           domain="[('model_name', '=', model_name), ('active', '=', True)]"
                           options="{'no_create': True, 'no_open': True}"/>
                    
                    <field name="force_send"/>
                </group>
                
                <group string="üì± Vista Previa">
                    <group>
                        <label for="preview_recipients" string="Destinatarios"/>
                        <field name="preview_recipients" widget="text" nolabel="1" readonly="1"/>
                    </group>
                    
                    <separator string="üí¨ Mensaje" colspan="2"/>
                    <group colspan="2">
                        <field name="preview_message" widget="text" nolabel="1" readonly="1"/>
                    </group>
                </group>
                
                <footer>
                    <button string="üì§ Enviar" 
                            name="action_send_and_close" 
                            type="object" 
                            class="oe_highlight"/>
                    <button string="Cancelar" 
                            class="btn-secondary" 
                            special="cancel"/>
                </footer>
            </form>
        </field>
    </record>

    <!-- ========================================= -->
    <!-- WIZARD: PROBAR PLANTILLA -->
    <!-- ========================================= -->
    <record id="view_whatsapp_template_test_wizard_form" model="ir.ui.view">
        <field name="name">whatsapp.template.test.wizard.form</field>
        <field name="model">whatsapp.template.test.wizard</field>
        <field name="arch" type="xml">
            <form string="Probar Plantilla WhatsApp">
                <group>
                    <field name="template_id" invisible="1"/>
                    <field name="model_name" invisible="1"/>
                    
                    <field name="test_record_id" 
                           placeholder="ID del registro para probar (ej: 123)"/>
                    
                    <field name="test_phone" 
                           placeholder="N√∫mero de prueba (opcional, ej: 51987654321)"/>
                </group>
                
                <group string="üì± Vista Previa del Env√≠o">
                    <group>
                        <label for="preview_recipients" string="Se enviar√° a"/>
                        <field name="preview_recipients" widget="text" nolabel="1" readonly="1"/>
                    </group>
                    
                    <separator string="üí¨ Mensaje que se enviar√°" colspan="2"/>
                    <group colspan="2">
                        <field name="preview_message" widget="text" nolabel="1" readonly="1"/>
                    </group>
                </group>
                
                <div class="alert alert-warning" role="alert">
                    <p><strong>‚ö†Ô∏è Advertencia:</strong></p>
                    <p>Este es un env√≠o REAL. El mensaje se enviar√° por WhatsApp.</p>
                    <ul>
                        <li>Si especificas un <strong>Tel√©fono de Prueba</strong>, se enviar√° solo a ese n√∫mero</li>
                        <li>Si dejas vac√≠o el tel√©fono, se usar√°n los destinatarios configurados en la plantilla</li>
                    </ul>
                </div>
                
                <footer>
                    <button string="üì§ Enviar Prueba" 
                            name="action_send_test" 
                            type="object" 
                            class="oe_highlight"
                            confirm="¬øEnviar mensaje de prueba por WhatsApp?"/>
                    <button string="Cancelar" 
                            class="btn-secondary" 
                            special="cancel"/>
                </footer>
            </form>
        </field>
    </record>

</odoo>