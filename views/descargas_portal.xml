<odoo>
    <template id="client_portal_descarga_archivos">
        <t t-call="website.layout">
            <div class="container">
                <div class="row">
                    <div class="col-md-12">
                        <h1>Descarga de archivos</h1>
                        <div class="input-group mb-3">
                            <input type="text" class="form-control" placeholder="Buscar archivo" aria-label="Buscar archivo" aria-describedby="basic-addon2" id="search" onkeyup="searchFiles()"/>
                            <div class="input-group-append">
                                <button class="btn btn-outline-secondary" type="button" onclick="searchFiles()">Buscar</button>
                            </div>
                        </div>
                        <table class="table table-striped">
                            <thead>
                                <tr>
                                    <th>Modelo de máquina</th>
                                    <th>Tipo</th>
                                    <th>Nombre de archivo</th>
                                    <th>Año</th>
                                    <th>Adjunto</th>
                                    <th>Descripción</th>
                                    <th>Acciones</th>
                                </tr>
                            </thead>
                            <tbody>
                                <t t-foreach="docs" t-as="doc">
                                    <tr>
                                        <td>
                                            <t t-esc="doc.modelo"/>
                                        </td>
                                        <td>
                                            <t t-esc="doc.tipo"/>
                                        </td>
                                        <td>
                                            <t t-esc="doc.name"/>
                                        </td>
                                        <td>
                                            <t t-esc="doc.ano"/>
                                        </td>
                                        <td>
                                            <t t-if="doc.adjunto">
                                                <a t-att-href="doc.adjunto">Descargar</a>
                                            </t>
                                        </td>
                                        <td>
                                            <t t-esc="doc.descripcion"/>
                                        </td>
                                        <td>
                                            <a t-att-href="'/descargar/archivo/' + str(doc.id)" class="btn btn-primary">Descargar</a>
                                        </td>
                                    </tr>
                                </t>
                            </tbody>
                        </table>
                        <!-- Paginación -->
                        <nav aria-label="Page navigation">
                            <ul class="pagination justify-content-center">
                                <t t-if="pager['page'] > 1">
                                    <li class="page-item">
                                        <a class="page-link" href="?page=1" aria-label="First">
                                            <span aria-hidden="true">««</span>
                                        </a>
                                    </li>
                                    <li class="page-item">
                                        <a class="page-link" href="?page=#{pager['page'] - 1}" aria-label="Previous">
                                            <span aria-hidden="true">«</span>
                                        </a>
                                    </li>
                                </t>
                                <t t-foreach="range(max(pager['page'] - 2, 1), min(pager['page'] + 3, pager['page_count'] + 1))" t-as="pg">
                                    <li t-att-class="'page-item' + (' active' if pg == pager['page'] else '')">
                                        <a class="page-link" t-att-href="'?page=%d' % pg">
                                            <t t-esc="pg"/>
                                        </a>
                                    </li>
                                </t>
                                <t t-if="pager['page'] < pager['page_count']">
                                    <li class="page-item">
                                        <a class="page-link" t-att-href="'?page=%s' % (pager['page'] + 1)" aria-label="Next">
                                            <span aria-hidden="true">»</span>
                                        </a>
                                    </li>
                                    <li class="page-item">
                                        <a class="page-link" t-att-href="'?page=%s' % pager['page_count']" aria-label="Last">
                                            <span aria-hidden="true">»»</span>
                                        </a>
                                    </li>
                                </t>

                            </ul>
                        </nav>
                    </div>
                </div>
            </div>
        </t>
        <script type="text/javascript" src="/copier_company/static/src/js/script.js"></script>
    </template>
</odoo>
