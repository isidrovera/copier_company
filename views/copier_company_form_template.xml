<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <template id="copier_company_form_template" name="Cotizaciones">
        <t t-call="website.layout">
            <div class="container-fluid py-5" style="background: linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%); min-height: 100vh;">
                <div class="row justify-content-center">
                    <div class="col-lg-11 col-xl-10">
                        <div class="card shadow-lg border-0 rounded-3 overflow-hidden" style="backdrop-filter: blur(10px);">
                            <!-- Header mejorado con gradiente animado -->
                            <div class="card-header position-relative overflow-hidden py-4" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);">
                                <div class="position-absolute top-0 start-0 w-100 h-100" style="background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><circle cx="20" cy="20" r="2" fill="rgba(255,255,255,0.1)"/><circle cx="80" cy="40" r="1.5" fill="rgba(255,255,255,0.1)"/><circle cx="40" cy="80" r="1" fill="rgba(255,255,255,0.1)"/></svg>'); animation: float 20s infinite linear;"></div>
                                <div class="d-flex align-items-center position-relative">
                                    <div class="bg-white bg-opacity-20 rounded-circle p-3 me-4">
                                        <i class="fas fa-clipboard-list fa-2x text-white"></i>
                                    </div>
                                    <div>
                                        <h1 class="mb-1 fw-bold text-white">Solicitud de Cotización</h1>
                                        <p class="mb-0 text-white-50 fs-6">Complete el formulario para recibir una cotización personalizada en 24 horas</p>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="card-body p-5">
                                <!-- Alert mejorado -->
                                <div id="error_message" class="alert alert-danger d-none border-0 shadow-sm rounded-3">
                                    <i class="fas fa-exclamation-triangle me-2"></i>
                                    <span id="error_text"></span>
                                </div>
                                
                                <!-- Alert de éxito -->
                                <div id="success_message" class="alert alert-success d-none border-0 shadow-sm rounded-3">
                                    <i class="fas fa-check-circle me-2"></i>
                                    <span id="success_text"></span>
                                </div>
                                
                                <!-- Barra de progreso mejorada -->
                                <div class="progress mb-4 shadow-sm" style="height: 8px; border-radius: 10px;">
                                    <div class="progress-bar bg-gradient" role="progressbar" style="width: 0%; background: linear-gradient(45deg, #4facfe 0%, #00f2fe 100%); border-radius: 10px; transition: width 0.3s ease;" id="form_progress"></div>
                                </div>
                                <div class="d-flex justify-content-between mb-4">
                                    <small class="text-muted">
                                        <i class="fas fa-info-circle me-1"></i>
                                        Progreso del formulario: <span id="progress_text">0%</span>
                                    </small>
                                    <small class="text-muted">
                                        <i class="fas fa-clock me-1"></i>
                                        Tiempo estimado: 3 minutos
                                    </small>
                                </div>
                                
                                <form action="/cotizacion/submit" method="POST" id="copier_form" class="needs-validation" novalidate="novalidate">
                                    <input type="hidden" name="csrf_token" t-att-value="request.csrf_token()"/>
                                    <input type="hidden" id="cliente_id" name="cliente_id" />
                                    
                                    <!-- Sección: Información del Cliente -->
                                    <div class="card mb-4 border-0 shadow-sm rounded-3 form-section">
                                        <div class="card-header bg-gradient-primary text-white py-3 rounded-top-3" style="background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);">
                                            <h5 class="mb-0 d-flex align-items-center">
                                                <div class="bg-white bg-opacity-20 rounded-circle p-2 me-3">
                                                    <i class="fas fa-user-circle"></i>
                                                </div>
                                                <div>
                                                    <div class="fw-bold">Información del Cliente</div>
                                                    <small class="opacity-75">Datos básicos para contacto</small>
                                                </div>
                                            </h5>
                                        </div>
                                        <div class="card-body p-4">
                                            <div class="row g-4">
                                                <div class="col-md-6">
                                                    <div class="form-floating mb-3">
                                                        <select class="form-select shadow-sm" id="tipo_identificacion" name="tipo_identificacion" style="border-radius: 12px;">
                                                            <t t-foreach="tipos_identificacion" t-as="tipo">
                                                                <option t-att-value="tipo.l10n_pe_vat_code">
                                                                    <t t-esc="tipo.name"/>
                                                                </option>
                                                            </t>
                                                        </select>
                                                        <label for="tipo_identificacion">
                                                            <i class="fas fa-id-badge me-2 text-primary"></i>Tipo de Identificación
                                                        </label>
                                                    </div>
                                                </div>
                                                
                                                <div class="col-md-6">
                                                    <div class="form-floating mb-3 position-relative">
                                                        <input type="text" class="form-control shadow-sm" id="identificacion" name="identificacion" placeholder="Número de RUC / DNI" onblur="obtenerDatosCliente()" required="1" style="border-radius: 12px;"/>
                                                        <label for="identificacion">
                                                            <i class="fas fa-id-card me-2 text-primary"></i>Número de Identificación
                                                        </label>
                                                        <div class="invalid-feedback">
                                                            <i class="fas fa-exclamation-circle me-1"></i>
                                                            Por favor ingrese un número de identificación válido
                                                        </div>
                                                        <div class="spinner-border spinner-border-sm position-absolute d-none" id="loading_spinner" style="top: 50%; right: 15px; transform: translateY(-50%);"></div>
                                                    </div>
                                                </div>
                                                
                                                <div class="col-md-12">
                                                    <div class="form-floating mb-3">
                                                        <input type="text" class="form-control shadow-sm" id="cliente_name" name="cliente_name" placeholder="Nombre del Cliente" readonly="1" style="border-radius: 12px; background-color: #f8f9fa;"/>
                                                        <label for="cliente_name">
                                                            <i class="fas fa-building me-2 text-primary"></i>Nombre/Razón Social
                                                        </label>
                                                    </div>
                                                </div>
                                                
                                                <div class="col-md-4">
                                                    <div class="form-floating mb-3">
                                                        <input type="text" class="form-control shadow-sm" id="contacto" name="contacto" placeholder="Contacto" required="1" style="border-radius: 12px;"/>
                                                        <label for="contacto">
                                                            <i class="fas fa-user me-2 text-primary"></i>Persona de Contacto
                                                        </label>
                                                        <div class="invalid-feedback">
                                                            <i class="fas fa-exclamation-circle me-1"></i>
                                                            Por favor ingrese un nombre de contacto
                                                        </div>
                                                    </div>
                                                </div>
                                                
                                                <div class="col-md-4">
                                                    <div class="form-floating mb-3">
                                                        <input type="email" class="form-control shadow-sm" id="correo" name="correo" placeholder="Correo" required="1" style="border-radius: 12px;"/>
                                                        <label for="correo">
                                                            <i class="fas fa-envelope me-2 text-primary"></i>Correo Electrónico
                                                        </label>
                                                        <div class="invalid-feedback">
                                                            <i class="fas fa-exclamation-circle me-1"></i>
                                                            Por favor ingrese un correo válido
                                                        </div>
                                                    </div>
                                                </div>
                                                
                                                <div class="col-md-4">
                                                    <div class="form-floating mb-3">
                                                        <input type="tel" class="form-control shadow-sm" id="telefono" name="telefono" placeholder="Teléfono" required="1" style="border-radius: 12px;"/>
                                                        <label for="telefono">
                                                            <i class="fas fa-phone me-2 text-primary"></i>Teléfono
                                                        </label>
                                                        <div class="invalid-feedback">
                                                            <i class="fas fa-exclamation-circle me-1"></i>
                                                            Por favor ingrese un número de teléfono
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <!-- Sección: Información del Equipo -->
                                    <div class="card mb-4 border-0 shadow-sm rounded-3 form-section">
                                        <div class="card-header bg-gradient-primary text-white py-3 rounded-top-3" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);">
                                            <h5 class="mb-0 d-flex align-items-center">
                                                <div class="bg-white bg-opacity-20 rounded-circle p-2 me-3">
                                                    <i class="fas fa-print"></i>
                                                </div>
                                                <div>
                                                    <div class="fw-bold">Especificaciones del Equipo</div>
                                                    <small class="opacity-75">Detalles técnicos y requerimientos</small>
                                                </div>
                                            </h5>
                                        </div>
                                        <div class="card-body p-4">
                                            <div class="row g-4">
                                                <div class="col-md-6">
                                                    <div class="form-floating mb-3">
                                                        <select class="form-select shadow-sm" id="name" name="name" style="border-radius: 12px;">
                                                            <t t-foreach="marcas" t-as="marca">
                                                                <option t-att-value="marca.id">
                                                                    <t t-esc="marca.name"/>
                                                                </option>
                                                            </t>
                                                        </select>
                                                        <label for="name">
                                                            <i class="fas fa-tag me-2 text-primary"></i>Modelo de Fotocopiadora
                                                        </label>
                                                    </div>
                                                </div>
                                                
                                                <div class="col-md-6">
                                                    <div class="form-floating mb-3">
                                                        <select class="form-select shadow-sm" id="tipo" name="tipo" style="border-radius: 12px;">
                                                            <option value="monocroma">Blanco y negro</option>
                                                            <option value="color">Color</option>
                                                        </select>
                                                        <label for="tipo">
                                                            <i class="fas fa-adjust me-2 text-primary"></i>Tipo de Impresión
                                                        </label>
                                                    </div>
                                                </div>
                                                
                                                <div class="col-md-4">
                                                    <div class="form-floating mb-3">
                                                        <select class="form-select shadow-sm" id="formato" name="formato" style="border-radius: 12px;">
                                                            <option value="a4">A4 (210 × 297 mm)</option>
                                                            <option value="a3">A3 (297 × 420 mm)</option>
                                                        </select>
                                                        <label for="formato">
                                                            <i class="fas fa-file-alt me-2 text-primary"></i>Formato de Papel
                                                        </label>
                                                    </div>
                                                </div>
                                                
                                                <div class="col-md-4">
                                                    <div class="form-floating mb-3">
                                                        <input type="number" min="0" class="form-control shadow-sm" id="volumen_mensual_color" name="volumen_mensual_color" placeholder="Volumen Mensual (Color)" required="1" style="border-radius: 12px;"/>
                                                        <label for="volumen_mensual_color">
                                                            <i class="fas fa-palette me-2 text-primary"></i>Impresiones Color/Mes
                                                        </label>
                                                        <div class="invalid-feedback">
                                                            <i class="fas fa-exclamation-circle me-1"></i>
                                                            Por favor ingrese un volumen válido
                                                        </div>
                                                        <div class="form-text">
                                                            <i class="fas fa-info-circle me-1 text-muted"></i>
                                                            Número estimado de páginas a color por mes
                                                        </div>
                                                    </div>
                                                </div>
                                                
                                                <div class="col-md-4">
                                                    <div class="form-floating mb-3">
                                                        <input type="number" min="0" class="form-control shadow-sm" id="volumen_mensual_bn" name="volumen_mensual_bn" placeholder="Volumen Mensual (B/N)" required="1" style="border-radius: 12px;"/>
                                                        <label for="volumen_mensual_bn">
                                                            <i class="fas fa-align-justify me-2 text-primary"></i>Impresiones B/N/Mes
                                                        </label>
                                                        <div class="invalid-feedback">
                                                            <i class="fas fa-exclamation-circle me-1"></i>
                                                            Por favor ingrese un volumen válido
                                                        </div>
                                                        <div class="form-text">
                                                            <i class="fas fa-info-circle me-1 text-muted"></i>
                                                            Número estimado de páginas en blanco y negro por mes
                                                        </div>
                                                    </div>
                                                </div>
                                                
                                                <div class="col-md-12">
                                                    <div class="form-floating mb-3">
                                                        <textarea class="form-control shadow-sm" id="detalles" name="detalles" rows="4" style="height: 120px; border-radius: 12px;" placeholder="Detalles adicionales"></textarea>
                                                        <label for="detalles">
                                                            <i class="fas fa-comment-dots me-2 text-primary"></i>Requerimientos Adicionales
                                                        </label>
                                                        <div class="form-text">
                                                            <i class="fas fa-lightbulb me-1 text-muted"></i>
                                                            Especifique funciones especiales, ubicación, horarios de uso, etc.
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <!-- Sección de términos y envío -->
                                    <div class="card mb-4 border-0 shadow-sm rounded-3">
                                        <div class="card-body p-4">
                                            <div class="row align-items-center">
                                                <div class="col-md-8">
                                                    <div class="form-check d-flex align-items-center">
                                                        <input class="form-check-input me-3" type="checkbox" id="terminos" required="1" style="transform: scale(1.2);"/>
                                                        <label class="form-check-label flex-fill" for="terminos">
                                                            <i class="fas fa-shield-alt me-2 text-success"></i>
                                                            Acepto los <a href="#" class="text-decoration-none">términos y condiciones</a> de servicio
                                                        </label>
                                                        <div class="invalid-feedback">
                                                            <i class="fas fa-exclamation-circle me-1"></i>
                                                            Debe aceptar los términos y condiciones
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="col-md-4 text-end">
                                                    <button type="submit" class="btn btn-primary btn-lg px-4 py-2 shadow-lg" style="border-radius: 12px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); border: none; transition: all 0.3s ease;">
                                                        <i class="fas fa-paper-plane me-2"></i>
                                                        Solicitar Cotización
                                                    </button>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </form>
                            </div>
                            
                            <!-- Footer mejorado -->
                            <div class="card-footer text-center py-4 bg-light border-0">
                                <div class="row">
                                    <div class="col-md-4">
                                        <i class="fas fa-clock text-primary mb-2 fa-2x"></i>
                                        <div class="small text-muted">
                                            <strong>Respuesta rápida</strong><br>
                                            24 horas hábiles
                                        </div>
                                    </div>
                                    <div class="col-md-4">
                                        <i class="fas fa-shield-alt text-success mb-2 fa-2x"></i>
                                        <div class="small text-muted">
                                            <strong>Datos seguros</strong><br>
                                            Información protegida
                                        </div>
                                    </div>
                                    <div class="col-md-4">
                                        <i class="fas fa-headset text-info mb-2 fa-2x"></i>
                                        <div class="small text-muted">
                                            <strong>Soporte técnico</strong><br>
                                            Asesoría personalizada
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </t>
        
        <!-- Scripts -->
        <script src="/copier_company/static/src/js/custom_script.js"></script>
        
        <!-- Estilos adicionales -->
        <style>
            @keyframes float {
                0% { transform: translateX(-100%); }
                100% { transform: translateX(100%); }
            }
            
            .btn-primary:hover {
                transform: translateY(-2px);
                box-shadow: 0 8px 25px rgba(102, 126, 234, 0.3) !important;
            }
            
            .form-control:focus,
            .form-select:focus {
                border-color: #667eea;
                box-shadow: 0 0 0 0.2rem rgba(102, 126, 234, 0.25);
            }
            
            .card {
                transition: transform 0.3s ease;
            }
            
            .card:hover {
                transform: translateY(-5px);
            }
            
            .form-floating > .form-control:focus ~ label,
            .form-floating > .form-select:focus ~ label {
                color: #667eea;
            }
            
            .progress-bar {
                transition: width 0.6s ease;
            }
            
            .invalid-feedback {
                display: block;
                font-size: 0.875rem;
                margin-top: 0.25rem;
            }
            
            .was-validated .form-control:invalid {
                border-color: #dc3545;
                background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 12 12' width='12' height='12' fill='none' stroke='%23dc3545'%3e%3ccircle cx='6' cy='6' r='4.5'/%3e%3cpath d='M5.8 3.6h.4L6 6.5z'/%3e%3ccircle cx='6' cy='8.2' r='.6'/%3e%3c/svg%3e");
                background-repeat: no-repeat;
                background-position: right calc(0.375em + 0.1875rem) center;
                background-size: calc(0.75em + 0.375rem) calc(0.75em + 0.375rem);
            }
            
            .was-validated .form-control:valid {
                border-color: #198754;
                background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 8 8'%3e%3cpath fill='%23198754' d='M2.3 6.73L.6 4.53c-.4-1.04.46-1.4 1.1-.8l1.1 1.4 3.4-3.8c.6-.63 1.6-.27 1.2.7l-4 4.6c-.43.5-.8.4-1.1.1z'/%3e%3c/svg%3e");
                background-repeat: no-repeat;
                background-position: right calc(0.375em + 0.1875rem) center;
                background-size: calc(0.75em + 0.375rem) calc(0.75em + 0.375rem);
            }
            
            .loading {
                background: linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%);
                background-size: 200% 100%;
                animation: loading 1.5s infinite;
            }
            
            @keyframes loading {
                0% { background-position: 200% 0; }
                100% { background-position: -200% 0; }
            }
            
            .form-text {
                font-size: 0.775rem;
                color: #6c757d;
                margin-top: 0.25rem;
            }
            
            .alert {
                border-radius: 12px;
                animation: fadeIn 0.5s ease-in-out;
            }
            
            @keyframes fadeIn {
                from { opacity: 0; transform: translateY(-10px); }
                to { opacity: 1; transform: translateY(0); }
            }
        </style>
    </template>
</odoo>