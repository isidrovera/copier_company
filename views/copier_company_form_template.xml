<?xml version="1.0" encoding="utf-8"?>
<odoo>

    <template id="copier_company_form_template" name="Copier Company Form">
    <t t-call="website.layout">
        <div class="container">
            <form action="/copier_company/submit" method="post" id="copier_form">
                <div class="form-group">
                    <label for="name">Maquina</label>
                    <select name="name" id="name" class="form-control" >
                        <t t-foreach="marcas" t-as="marca">
                            <option t-att-value="marca.id"><t t-esc="marca.name"/></option>
                        </t>
                    </select>
                </div>
                <div class="form-group">
                    <label for="serie_id">Serie</label>
                    <input type="text" id="serie_id" name="serie_id" class="form-control" />
                </div>
                <div class="form-group">
                    <label for="identificacion">Numero de Identificación</label>
                    <input type="text" id="identificacion" name="identificacion" class="form-control"/>
                </div>
                <div class="form-group">
                    <label for="tipo_identificacion">Tipo de identificación</label>
                    <input type="text" id="tipo_identificacion" name="tipo_identificacion" class="form-control"/>
                </div>
                <div class="form-group">
                    <label for="cliente_name">Nombre del Cliente</label>
                    <input type="text" id="cliente_name" name="cliente_name" class="form-control"/>
                </div>
                <div class="form-group">
                    <label for="tipo">Tipo de impresora</label>
                    <select name="tipo" id="tipo" class="form-control">
                        <option value="monocroma">Blanco y negro</option>
                        <option value="color">Color</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="contacto">Contacto</label>
                    <input type="text" id="contacto" name="contacto" class="form-control"/>
                </div>
                <div class="form-group">
                    <label for="celular">Telefono</label>
                    <input type="text" id="celular" name="celular" class="form-control"/>
                </div>
                <div class="form-group">
                    <label for="correo">Correo</label>
                    <input type="text" id="correo" name="correo" class="form-control"/>
                </div>
                <div class="form-group">
                    <label for="detalles">Detalle</label>
                    <textarea id="detalles" name="detalles" class="form-control"></textarea>
                </div>
                <div class="form-group">
                    <label for="formato">Formato</label>
                    <select name="formato" id="formato" class="form-control">
                        <option value="a4">A4</option>
                        <option value="a3">A3</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="volumen_mensual_color">Volumen Mensual (Color)</label>
                    <input type="number" id="volumen_mensual_color" name="volumen_mensual_color" class="form-control"/>
                </div>
                <div class="form-group">
                    <label for="volumen_mensual_bn">Volumen Mensual (B/N)</label>
                    <input type="number" id="volumen_mensual_bn" name="volumen_mensual_bn" class="form-control"/>
                </div>
                <button type="submit" class="btn btn-primary">Enviar</button>
            </form>
        </div>
        <script>
            document.getElementById('identificacion').addEventListener('change', function () {
                const identificacion = this.value;
                if (identificacion) {
                    fetch('/copier_company/fetch_cliente', {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json',
                            'X-Requested-With': 'XMLHttpRequest'
                        },
                        body: JSON.stringify({ identificacion: identificacion })
                    }).then(response =&lt; response.json()).then(data =&lt; {
                        if (data.success) {
                            document.getElementById('cliente_name').value = data.name;
                            document.getElementById('tipo_identificacion').value = data.tipo_identificacion;
                        } else {
                            document.getElementById('cliente_name').value = '';
                            document.getElementById('tipo_identificacion').value = '';
                        }
                    });
                }
            });
        </script>
    </t>
</template>


</odoo>
