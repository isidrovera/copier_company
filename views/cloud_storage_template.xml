<odoo>
 <template id="cloud_storage_template" name="Cloud Storage">
    <t t-call="web.layout">
        <div class="oe_structure"/>
        <div class="container">
            <h2>Cloud Storage</h2>
            <!-- Formulario de búsqueda -->
            <form action="/cloud/storage/search" method="get" class="search-form mb-3">
                <div class="input-group">
                    <input type="text" name="query" placeholder="Search files..." class="form-control"/>
                    <div class="input-group-append">
                        <button type="submit" class="btn btn-primary">Search</button>
                    </div>
                </div>
            </form>
            <table class="table table-hover">
                <thead>
                    <tr>
                        <th>Name</th>
                        <th>Action</th>
                    </tr>
                </thead>
                <tbody>
                    <t t-foreach="files_dirs" t-as="fd">
                        <tr>
                            <td>
                                <t t-if="fd['is_dir']">
                                    <a t-attf-href="/cloud/storage/{{ current_path }}/{{ fd['name'] }}">
                                        <i class="fa fa-folder"></i> <t t-esc="fd['name']"/>
                                    </a>
                                </t>
                                <t t-else="">
                                    <t t-esc="fd['name']"/>
                                </t>
                            </td>
                            <td>
                                <t t-if="not fd['is_dir']">
                                    <!-- Ícono de descarga para archivos -->
                                    <a t-attf-href="/cloud/storage/download/{{ current_path }}/{{ fd['name'] }}" class="btn btn-default">
                                        <i class="fa fa-download"></i>
                                    </a>
                                </t>
                            </td>
                        </tr>
                    </t>
                </tbody>
            </table>
        </div>
    </t>
</template>


<template id="cloud_storage_search_template" name="Search Results">
        <t t-call="web.layout">
            <div class="oe_structure"/>
            <div class="container">
                <h2>Search Results for "<t t-esc="query"/>":</h2>
                <div class="mt-2">
                    <t t-foreach="search_results" t-as="result">
                        <div class="mb-2">
                            <i class="fa fa-file" aria-hidden="true"></i>
                            <a t-attf-href="/cloud/storage/download/{{ result }}">{{ result.split('/')[-1] }}</a>
                        </div>
                    </t>
                    <t t-if="not search_results">
                        <p>No files found matching your query.</p>
                    </t>
                </div>
            </div>
        </t>
    </template>


</odoo>
