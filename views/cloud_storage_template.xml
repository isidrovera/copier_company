<odoo>
  <template id="cloud_storage_template" name="Cloud Storage">
    <t t-call="web.layout">
        <div class="oe_structure"/>
        <div class="container">
            <h1 class="text-center my-4">Cloud Storage</h1>
            
            <!-- Formulario de búsqueda -->
            <div class="row mb-4">
                <div class="col-md-12">
                    <form action="/cloud/storage/search" method="get" class="search-form">
                        <div class="input-group">
                            <input type="text" name="query" placeholder="Search files..." class="form-control"/>
                            <div class="input-group-append">
                                <button type="submit" class="btn btn-secondary">Search</button>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
            
            <!-- Lista de archivos/carpetas -->
            <div class="row">
                <div class="col-md-12">
                    <table class="table">
                        <thead>
                            <tr>
                                <th>Name</th>
                                <th>Action</th>
                            </tr>
                        </thead>
                        <tbody>
                            <t t-foreach="files_dirs" t-as="fd">
                                <tr>
                                    <td>
                                        <t t-if="fd['is_dir']">
                                            <i class="fa fa-folder"></i>
                                             <a t-attf-href="/cloud/storage/{{ fd['path'] }}"><t t-esc="fd['name']"/></a>
                                        </t>
                                        <t t-else="">
                                            <i class="fa fa-file"></i>
                                            <t t-esc="fd['name']"/>
                                        </t>
                                    </td>
                                    <td>
                                        <t t-if="not fd['is_dir']">
                                            <!-- Botón de descarga -->
                                            <a t-attf-href="/cloud/storage/download/{{ fd['path'] }}" class="btn btn-sm btn-primary">
                                                <i class="fa fa-download"></i> Download
                                            </a>
                                        </t>
                                    </td>
                                </tr>
                            </t>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </t>
</template>

<template id="cloud_storage_search_template" name="Search Results">
        <t t-call="web.layout">
            <div class="oe_structure"/>
            <div class="container">
                <h2>Search Results for "<t t-esc="query"/>":</h2>
                <div class="mt-2">
                    <t t-foreach="search_results" t-as="result">
                        <div class="mb-2">
                            <i class="fa fa-file" aria-hidden="true"></i>
                            <a t-attf-href="/cloud/storage/download/{{ result }}">{{ result.split('/')[-1] }}</a>
                        </div>
                    </t>
                    <t t-if="not search_results">
                        <p>No files found matching your query.</p>
                    </t>
                </div>
            </div>
        </t>
    </template>


</odoo>
